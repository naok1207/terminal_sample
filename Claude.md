# Claude.md

## プロジェクト概要

macOSで動作するElectronアプリ内に、開発者向けの高機能ターミナル（VSCodeターミナル相当）を実装する。
最終的には、VSCodeターミナルの実装（xterm.js＋node-pty構成）を参考に、vim・tmux等のインタラクティブCLIアプリをストレスなく利用できるUXを実現することを目指す。

---

## 要件

- **xterm.jsによるターミナルUI**
  レンダラープロセスでxterm.jsを使ってターミナル画面を表示する。
  カラー表示やカーソル制御、入力受付など、VSCodeと同等の体験を重視。

- **node-ptyでmacOSシェル起動**
  メインプロセスでnode-ptyを使い、ユーザー環境のzsh/bashをログインシェルとして起動。
  vimやtmuxなどインタラクティブCLIツールもフル対応。

- **プロセス間通信（IPC）**
  ユーザー入力はレンダラ→メイン→ptyへ、pty出力はメイン→レンダラ→xterm.jsへ双方向通信。
  ウィンドウサイズ変更時にはpty側にもresizeを反映。

- **WebGLレンダラー有効化**
  パフォーマンス向上のためxterm.jsでWebGLレンダラ（xterm-addon-webgl）を有効化。

- **macOSのPATH対策**
  macOSでPATHが通らない問題（ダブルクリック起動時など）はfix-path等で解決し、brewや各種CLIコマンドが使える状態にする。

- **コピー＆ペースト対応**
  標準的なコピー/ペースト操作（右クリック、ショートカット）も利用可能にする。

- **TypeScriptでの実装**
  すべてTypeScriptで記述する。package.jsonやtsconfig.jsonも含めてプロジェクトを管理。

- **最小構成**
  タブやマルチペインなど高度な機能は当面不要。ターミナル1画面のみの実装で十分。

- **VSCodeターミナル設計をできるだけ参考に**
  TerminalProcessなどVSCodeの実装思想を踏襲。

---

## 注意点・その他

- セキュリティ的なコマンド制限などは不要。
- エラー処理や細かなUI仕様は仮実装でもOK。
- 必要に応じてelectron-context-menu等の補助パッケージの利用も許容。

---

## 利用目的

このターミナル実装をカスタムIDEや開発者ツールの基礎とする。

---

## 運用

- このClaude.mdの内容はプロジェクトの**前提コンテキスト**としてAIエージェントや開発者全員で参照する。
- 追加要件・仕様変更があればこのファイルに追記する形で随時アップデートする。
